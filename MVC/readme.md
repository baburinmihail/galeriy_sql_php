# Модуль 25 Галерея и работа  с СУБД

LICENSE: [MIT](./license.md)

---
Здравствуйте, в данной работе надо было сделать галерею с подвязкой к СУБД и привязкой комментариев к каждому изображению. 

Среди условий авторизованный пользователь может сохранять изображения и оставлять к нему комментарий. Изначально его кидает на неавторизованный вариант, со всеми изображениями и комментариями, на данный момент он не может заливать новые изображения и комментарии, пока не авторизуется.  

Для регистрации я создал два контролера Registr и RegistrMove. Regist Выдает фасад c формой для регистрации и отправляет на RegistrMove, где делается запрос на создание новой записи с двумя столбцами. И записываю в сессию переменный user, password. Это нужно, чтобы при переадресации на контроллер главной страницы, не переслало обратно на неавторизованный вариант, так как стоит проверка на существование переменных в сессии. 

По Аналогии, авторизация делается так же только в места записи идет проверка уже существующих записей, и проверка переменных в сессии. Вдруг пользователя надо отправить на главную страницу.
На главные страницы выводится все изображения с помощью запроса и цикла forreach, а комментарии отрисовываюся внутри это цикла. Так же через цикл, но с проверкой, если поле id_img(есть в таблице комментариев) и id (из таблицы картинок) совпадает тогда это наш комментарий и выводится все поля, как сам комментарий, дата его создания, и ссылка на удаление.

Принцип для удаления комментариев и картинок одинаковый. Создаю ссылку на контроллер и через GET параметр передаю id-шник. Единственная разница в контроллере на картинку, делаю два запроса, на удаление всех комментариев, привязанных к этой картинке и собственного картинку.

Разрешённый размер файла регулируется через config.php (переменная MYFILESUZE)   

Путь файла регулируется через config.php (переменная GLOBAL_NAME_SERVER) 

Тип файла (переменная THIS_TYPE_FiLE)

Комментарии пишутся в БД данные по подключению так же в config.
	
Ну напоследок верстку , как в рекомендации взял с оф.bootstrap 

Пункты все выполнил и работу считаю законченной.


---

GiT logo by GitHub.Own work using: https://github.com/logos, 
license: [CC BY 3.0](https://creativecommons.org/licenses/by/3.0/deed.ru)